0001   0000             ; ######################################
0002   0000             ; #                                    #
0003   0000             ; #         uMON1 Version 1.03         #
0004   0000             ; #  --------------------------------  #
0005   0000             ; #   Special Key Sequences            #
0006   0000             ; #  --------------------------------  #
0007   0000             ; #   Shift-+ - Insert byte.           #
0008   0000             ; #   Shift-- - Delete byte.           #
0009   0000             ; #                                    #
0010   0000             ; #  --------------------------------  #
0011   0000             ; #   Included Modules                 #
0012   0000             ; #  --------------------------------  #
0013   0000             ; #   MOD01-RAMTest         (Shift-0)  #
0014   0000             ; #   MOD02-Serial Send     (Shift-1)  #
0015   0000             ; #   MOD03-Serial Receive  (Shift-2)  #
0016   0000             ; #   MOD10-Serial Loopback (Shift-F)  #
0017   0000             ; #  --------------------------------  #
0018   0000             ; #                                    #
0019   0000             ; #  by Scott Gregory                  #
0020   0000             ; #  13/06/2021                        #
0021   0000             ; #                                    #
0022   0000             ; ######################################
0023   0000             ;
0024   0000             STACKTOP	.EQU	$08C0 ; Stack position.
0025   0000             ROMBASE		.EQU	$0000 ; Start of ROM.
0026   0000             ROMTOP		.EQU	$07FF ; End of ROM.
0027   0000             RAMBASE		.EQU	$0900 ; Start of user RAM.
0028   0000             RAMTOP		.EQU	$FFFF ; End of user RAM.
0029   0000             CATHDLY		.EQU	$40 ; Digit display delay.
0030   0000             KEYPORT		.EQU	$00 ; Keypad port.
0031   0000             CATHPORT	.EQU	$01 ; Display catchode port.
0032   0000             SEGPORT		.EQU	$02 ; Display segment port.
0033   0000             ;
0034   0000             ADDRESS		.EQU	$08C1 ; 2 Bytes.
0035   0000             SCRATCH		.EQU	$08C3 ; 2 Bytes.
0036   0000             MODE		.EQU	$08C5 ; 1 Byte.
0037   0000             KEYDATA		.EQU	$08C6 ; 1 Byte.
0038   0000             BEEPLENGTH	.EQU	$08C7 ; 2 Bytes.
0039   0000             BEEPFREQ	.EQU	$08C9 ; 1 Byte.
0040   0000             ;
0041   0000             ; Begin global MOD assignments.
0042   0000             SERBUFFER	.EQU	$06
0043   0000             SERSTATUS	.EQU	$07
0044   0000             SERSTART	.EQU	$08F6
0045   0000             SEREND		.EQU	$08F8
0046   0000             ; End global MOD assignments.
0047   0000             ;
0048   0000             ; Begin MOD-01 assignments.
0049   0000             M01START	.EQU	$08F0
0050   0000             M01FINISH	.EQU	$08F2
0051   0000             M01PATTERN	.EQU	$08F4
0052   0000             ; End MOD-01 assignments.
0053   0000             ;
0054   0000             ; Begin MOD-02 assignments.
0055   0000             ; End MOD-02 assignments.
0056   0000             ;
0057   0000             ; Begin MOD-10 assignments.
0058   0000             ; End MOD-10 assignments.
0059   0000             ;
0060   0000 00 00 00 00 			.FILL	(ROMTOP - ROMBASE) + 1, $00
0060   0004 00 00 00 00 
0060   0008 00 00 00 00 
0060   000C 00 00 00 00 
0060   0010 00 00 00 00 
0060   0014 00 00 00 00 
0060   0018 00 00 00 00 
0060   001C 00 00 00 00 
0060   0020 00 00 00 00 
0060   0024 00 00 00 00 
0060   0028 00 00 00 00 
0060   002C 00 00 00 00 
0060   0030 00 00 00 00 
0060   0034 00 00 00 00 
0060   0038 00 00 00 00 
0060   003C 00 00 00 00 
0060   0040 00 00 00 00 
0060   0044 00 00 00 00 
0060   0048 00 00 00 00 
0060   004C 00 00 00 00 
0060   0050 00 00 00 00 
0060   0054 00 00 00 00 
0060   0058 00 00 00 00 
0060   005C 00 00 00 00 
0060   0060 00 00 00 00 
0060   0064 00 00 00 00 
0060   0068 00 00 00 00 
0060   006C 00 00 00 00 
0060   0070 00 00 00 00 
0060   0074 00 00 00 00 
0060   0078 00 00 00 00 
0060   007C 00 00 00 00 
0060   0080 00 00 00 00 
0060   0084 00 00 00 00 
0060   0088 00 00 00 00 
0060   008C 00 00 00 00 
0060   0090 00 00 00 00 
0060   0094 00 00 00 00 
0060   0098 00 00 00 00 
0060   009C 00 00 00 00 
0060   00A0 00 00 00 00 
0060   00A4 00 00 00 00 
0060   00A8 00 00 00 00 
0060   00AC 00 00 00 00 
0060   00B0 00 00 00 00 
0060   00B4 00 00 00 00 
0060   00B8 00 00 00 00 
0060   00BC 00 00 00 00 
0060   00C0 00 00 00 00 
0060   00C4 00 00 00 00 
0060   00C8 00 00 00 00 
0060   00CC 00 00 00 00 
0060   00D0 00 00 00 00 
0060   00D4 00 00 00 00 
0060   00D8 00 00 00 00 
0060   00DC 00 00 00 00 
0060   00E0 00 00 00 00 
0060   00E4 00 00 00 00 
0060   00E8 00 00 00 00 
0060   00EC 00 00 00 00 
0060   00F0 00 00 00 00 
0060   00F4 00 00 00 00 
0060   00F8 00 00 00 00 
0060   00FC 00 00 00 00 
0060   0100 00 00 00 00 
0060   0104 00 00 00 00 
0060   0108 00 00 00 00 
0060   010C 00 00 00 00 
0060   0110 00 00 00 00 
0060   0114 00 00 00 00 
0060   0118 00 00 00 00 
0060   011C 00 00 00 00 
0060   0120 00 00 00 00 
0060   0124 00 00 00 00 
0060   0128 00 00 00 00 
0060   012C 00 00 00 00 
0060   0130 00 00 00 00 
0060   0134 00 00 00 00 
0060   0138 00 00 00 00 
0060   013C 00 00 00 00 
0060   0140 00 00 00 00 
0060   0144 00 00 00 00 
0060   0148 00 00 00 00 
0060   014C 00 00 00 00 
0060   0150 00 00 00 00 
0060   0154 00 00 00 00 
0060   0158 00 00 00 00 
0060   015C 00 00 00 00 
0060   0160 00 00 00 00 
0060   0164 00 00 00 00 
0060   0168 00 00 00 00 
0060   016C 00 00 00 00 
0060   0170 00 00 00 00 
0060   0174 00 00 00 00 
0060   0178 00 00 00 00 
0060   017C 00 00 00 00 
0060   0180 00 00 00 00 
0060   0184 00 00 00 00 
0060   0188 00 00 00 00 
0060   018C 00 00 00 00 
0060   0190 00 00 00 00 
0060   0194 00 00 00 00 
0060   0198 00 00 00 00 
0060   019C 00 00 00 00 
0060   01A0 00 00 00 00 
0060   01A4 00 00 00 00 
0060   01A8 00 00 00 00 
0060   01AC 00 00 00 00 
0060   01B0 00 00 00 00 
0060   01B4 00 00 00 00 
0060   01B8 00 00 00 00 
0060   01BC 00 00 00 00 
0060   01C0 00 00 00 00 
0060   01C4 00 00 00 00 
0060   01C8 00 00 00 00 
0060   01CC 00 00 00 00 
0060   01D0 00 00 00 00 
0060   01D4 00 00 00 00 
0060   01D8 00 00 00 00 
0060   01DC 00 00 00 00 
0060   01E0 00 00 00 00 
0060   01E4 00 00 00 00 
0060   01E8 00 00 00 00 
0060   01EC 00 00 00 00 
0060   01F0 00 00 00 00 
0060   01F4 00 00 00 00 
0060   01F8 00 00 00 00 
0060   01FC 00 00 00 00 
0060   0200 00 00 00 00 
0060   0204 00 00 00 00 
0060   0208 00 00 00 00 
0060   020C 00 00 00 00 
0060   0210 00 00 00 00 
0060   0214 00 00 00 00 
0060   0218 00 00 00 00 
0060   021C 00 00 00 00 
0060   0220 00 00 00 00 
0060   0224 00 00 00 00 
0060   0228 00 00 00 00 
0060   022C 00 00 00 00 
0060   0230 00 00 00 00 
0060   0234 00 00 00 00 
0060   0238 00 00 00 00 
0060   023C 00 00 00 00 
0060   0240 00 00 00 00 
0060   0244 00 00 00 00 
0060   0248 00 00 00 00 
0060   024C 00 00 00 00 
0060   0250 00 00 00 00 
0060   0254 00 00 00 00 
0060   0258 00 00 00 00 
0060   025C 00 00 00 00 
0060   0260 00 00 00 00 
0060   0264 00 00 00 00 
0060   0268 00 00 00 00 
0060   026C 00 00 00 00 
0060   0270 00 00 00 00 
0060   0274 00 00 00 00 
0060   0278 00 00 00 00 
0060   027C 00 00 00 00 
0060   0280 00 00 00 00 
0060   0284 00 00 00 00 
0060   0288 00 00 00 00 
0060   028C 00 00 00 00 
0060   0290 00 00 00 00 
0060   0294 00 00 00 00 
0060   0298 00 00 00 00 
0060   029C 00 00 00 00 
0060   02A0 00 00 00 00 
0060   02A4 00 00 00 00 
0060   02A8 00 00 00 00 
0060   02AC 00 00 00 00 
0060   02B0 00 00 00 00 
0060   02B4 00 00 00 00 
0060   02B8 00 00 00 00 
0060   02BC 00 00 00 00 
0060   02C0 00 00 00 00 
0060   02C4 00 00 00 00 
0060   02C8 00 00 00 00 
0060   02CC 00 00 00 00 
0060   02D0 00 00 00 00 
0060   02D4 00 00 00 00 
0060   02D8 00 00 00 00 
0060   02DC 00 00 00 00 
0060   02E0 00 00 00 00 
0060   02E4 00 00 00 00 
0060   02E8 00 00 00 00 
0060   02EC 00 00 00 00 
0060   02F0 00 00 00 00 
0060   02F4 00 00 00 00 
0060   02F8 00 00 00 00 
0060   02FC 00 00 00 00 
0060   0300 00 00 00 00 
0060   0304 00 00 00 00 
0060   0308 00 00 00 00 
0060   030C 00 00 00 00 
0060   0310 00 00 00 00 
0060   0314 00 00 00 00 
0060   0318 00 00 00 00 
0060   031C 00 00 00 00 
0060   0320 00 00 00 00 
0060   0324 00 00 00 00 
0060   0328 00 00 00 00 
0060   032C 00 00 00 00 
0060   0330 00 00 00 00 
0060   0334 00 00 00 00 
0060   0338 00 00 00 00 
0060   033C 00 00 00 00 
0060   0340 00 00 00 00 
0060   0344 00 00 00 00 
0060   0348 00 00 00 00 
0060   034C 00 00 00 00 
0060   0350 00 00 00 00 
0060   0354 00 00 00 00 
0060   0358 00 00 00 00 
0060   035C 00 00 00 00 
0060   0360 00 00 00 00 
0060   0364 00 00 00 00 
0060   0368 00 00 00 00 
0060   036C 00 00 00 00 
0060   0370 00 00 00 00 
0060   0374 00 00 00 00 
0060   0378 00 00 00 00 
0060   037C 00 00 00 00 
0060   0380 00 00 00 00 
0060   0384 00 00 00 00 
0060   0388 00 00 00 00 
0060   038C 00 00 00 00 
0060   0390 00 00 00 00 
0060   0394 00 00 00 00 
0060   0398 00 00 00 00 
0060   039C 00 00 00 00 
0060   03A0 00 00 00 00 
0060   03A4 00 00 00 00 
0060   03A8 00 00 00 00 
0060   03AC 00 00 00 00 
0060   03B0 00 00 00 00 
0060   03B4 00 00 00 00 
0060   03B8 00 00 00 00 
0060   03BC 00 00 00 00 
0060   03C0 00 00 00 00 
0060   03C4 00 00 00 00 
0060   03C8 00 00 00 00 
0060   03CC 00 00 00 00 
0060   03D0 00 00 00 00 
0060   03D4 00 00 00 00 
0060   03D8 00 00 00 00 
0060   03DC 00 00 00 00 
0060   03E0 00 00 00 00 
0060   03E4 00 00 00 00 
0060   03E8 00 00 00 00 
0060   03EC 00 00 00 00 
0060   03F0 00 00 00 00 
0060   03F4 00 00 00 00 
0060   03F8 00 00 00 00 
0060   03FC 00 00 00 00 
0060   0400 00 00 00 00 
0060   0404 00 00 00 00 
0060   0408 00 00 00 00 
0060   040C 00 00 00 00 
0060   0410 00 00 00 00 
0060   0414 00 00 00 00 
0060   0418 00 00 00 00 
0060   041C 00 00 00 00 
0060   0420 00 00 00 00 
0060   0424 00 00 00 00 
0060   0428 00 00 00 00 
0060   042C 00 00 00 00 
0060   0430 00 00 00 00 
0060   0434 00 00 00 00 
0060   0438 00 00 00 00 
0060   043C 00 00 00 00 
0060   0440 00 00 00 00 
0060   0444 00 00 00 00 
0060   0448 00 00 00 00 
0060   044C 00 00 00 00 
0060   0450 00 00 00 00 
0060   0454 00 00 00 00 
0060   0458 00 00 00 00 
0060   045C 00 00 00 00 
0060   0460 00 00 00 00 
0060   0464 00 00 00 00 
0060   0468 00 00 00 00 
0060   046C 00 00 00 00 
0060   0470 00 00 00 00 
0060   0474 00 00 00 00 
0060   0478 00 00 00 00 
0060   047C 00 00 00 00 
0060   0480 00 00 00 00 
0060   0484 00 00 00 00 
0060   0488 00 00 00 00 
0060   048C 00 00 00 00 
0060   0490 00 00 00 00 
0060   0494 00 00 00 00 
0060   0498 00 00 00 00 
0060   049C 00 00 00 00 
0060   04A0 00 00 00 00 
0060   04A4 00 00 00 00 
0060   04A8 00 00 00 00 
0060   04AC 00 00 00 00 
0060   04B0 00 00 00 00 
0060   04B4 00 00 00 00 
0060   04B8 00 00 00 00 
0060   04BC 00 00 00 00 
0060   04C0 00 00 00 00 
0060   04C4 00 00 00 00 
0060   04C8 00 00 00 00 
0060   04CC 00 00 00 00 
0060   04D0 00 00 00 00 
0060   04D4 00 00 00 00 
0060   04D8 00 00 00 00 
0060   04DC 00 00 00 00 
0060   04E0 00 00 00 00 
0060   04E4 00 00 00 00 
0060   04E8 00 00 00 00 
0060   04EC 00 00 00 00 
0060   04F0 00 00 00 00 
0060   04F4 00 00 00 00 
0060   04F8 00 00 00 00 
0060   04FC 00 00 00 00 
0060   0500 00 00 00 00 
0060   0504 00 00 00 00 
0060   0508 00 00 00 00 
0060   050C 00 00 00 00 
0060   0510 00 00 00 00 
0060   0514 00 00 00 00 
0060   0518 00 00 00 00 
0060   051C 00 00 00 00 
0060   0520 00 00 00 00 
0060   0524 00 00 00 00 
0060   0528 00 00 00 00 
0060   052C 00 00 00 00 
0060   0530 00 00 00 00 
0060   0534 00 00 00 00 
0060   0538 00 00 00 00 
0060   053C 00 00 00 00 
0060   0540 00 00 00 00 
0060   0544 00 00 00 00 
0060   0548 00 00 00 00 
0060   054C 00 00 00 00 
0060   0550 00 00 00 00 
0060   0554 00 00 00 00 
0060   0558 00 00 00 00 
0060   055C 00 00 00 00 
0060   0560 00 00 00 00 
0060   0564 00 00 00 00 
0060   0568 00 00 00 00 
0060   056C 00 00 00 00 
0060   0570 00 00 00 00 
0060   0574 00 00 00 00 
0060   0578 00 00 00 00 
0060   057C 00 00 00 00 
0060   0580 00 00 00 00 
0060   0584 00 00 00 00 
0060   0588 00 00 00 00 
0060   058C 00 00 00 00 
0060   0590 00 00 00 00 
0060   0594 00 00 00 00 
0060   0598 00 00 00 00 
0060   059C 00 00 00 00 
0060   05A0 00 00 00 00 
0060   05A4 00 00 00 00 
0060   05A8 00 00 00 00 
0060   05AC 00 00 00 00 
0060   05B0 00 00 00 00 
0060   05B4 00 00 00 00 
0060   05B8 00 00 00 00 
0060   05BC 00 00 00 00 
0060   05C0 00 00 00 00 
0060   05C4 00 00 00 00 
0060   05C8 00 00 00 00 
0060   05CC 00 00 00 00 
0060   05D0 00 00 00 00 
0060   05D4 00 00 00 00 
0060   05D8 00 00 00 00 
0060   05DC 00 00 00 00 
0060   05E0 00 00 00 00 
0060   05E4 00 00 00 00 
0060   05E8 00 00 00 00 
0060   05EC 00 00 00 00 
0060   05F0 00 00 00 00 
0060   05F4 00 00 00 00 
0060   05F8 00 00 00 00 
0060   05FC 00 00 00 00 
0060   0600 00 00 00 00 
0060   0604 00 00 00 00 
0060   0608 00 00 00 00 
0060   060C 00 00 00 00 
0060   0610 00 00 00 00 
0060   0614 00 00 00 00 
0060   0618 00 00 00 00 
0060   061C 00 00 00 00 
0060   0620 00 00 00 00 
0060   0624 00 00 00 00 
0060   0628 00 00 00 00 
0060   062C 00 00 00 00 
0060   0630 00 00 00 00 
0060   0634 00 00 00 00 
0060   0638 00 00 00 00 
0060   063C 00 00 00 00 
0060   0640 00 00 00 00 
0060   0644 00 00 00 00 
0060   0648 00 00 00 00 
0060   064C 00 00 00 00 
0060   0650 00 00 00 00 
0060   0654 00 00 00 00 
0060   0658 00 00 00 00 
0060   065C 00 00 00 00 
0060   0660 00 00 00 00 
0060   0664 00 00 00 00 
0060   0668 00 00 00 00 
0060   066C 00 00 00 00 
0060   0670 00 00 00 00 
0060   0674 00 00 00 00 
0060   0678 00 00 00 00 
0060   067C 00 00 00 00 
0060   0680 00 00 00 00 
0060   0684 00 00 00 00 
0060   0688 00 00 00 00 
0060   068C 00 00 00 00 
0060   0690 00 00 00 00 
0060   0694 00 00 00 00 
0060   0698 00 00 00 00 
0060   069C 00 00 00 00 
0060   06A0 00 00 00 00 
0060   06A4 00 00 00 00 
0060   06A8 00 00 00 00 
0060   06AC 00 00 00 00 
0060   06B0 00 00 00 00 
0060   06B4 00 00 00 00 
0060   06B8 00 00 00 00 
0060   06BC 00 00 00 00 
0060   06C0 00 00 00 00 
0060   06C4 00 00 00 00 
0060   06C8 00 00 00 00 
0060   06CC 00 00 00 00 
0060   06D0 00 00 00 00 
0060   06D4 00 00 00 00 
0060   06D8 00 00 00 00 
0060   06DC 00 00 00 00 
0060   06E0 00 00 00 00 
0060   06E4 00 00 00 00 
0060   06E8 00 00 00 00 
0060   06EC 00 00 00 00 
0060   06F0 00 00 00 00 
0060   06F4 00 00 00 00 
0060   06F8 00 00 00 00 
0060   06FC 00 00 00 00 
0060   0700 00 00 00 00 
0060   0704 00 00 00 00 
0060   0708 00 00 00 00 
0060   070C 00 00 00 00 
0060   0710 00 00 00 00 
0060   0714 00 00 00 00 
0060   0718 00 00 00 00 
0060   071C 00 00 00 00 
0060   0720 00 00 00 00 
0060   0724 00 00 00 00 
0060   0728 00 00 00 00 
0060   072C 00 00 00 00 
0060   0730 00 00 00 00 
0060   0734 00 00 00 00 
0060   0738 00 00 00 00 
0060   073C 00 00 00 00 
0060   0740 00 00 00 00 
0060   0744 00 00 00 00 
0060   0748 00 00 00 00 
0060   074C 00 00 00 00 
0060   0750 00 00 00 00 
0060   0754 00 00 00 00 
0060   0758 00 00 00 00 
0060   075C 00 00 00 00 
0060   0760 00 00 00 00 
0060   0764 00 00 00 00 
0060   0768 00 00 00 00 
0060   076C 00 00 00 00 
0060   0770 00 00 00 00 
0060   0774 00 00 00 00 
0060   0778 00 00 00 00 
0060   077C 00 00 00 00 
0060   0780 00 00 00 00 
0060   0784 00 00 00 00 
0060   0788 00 00 00 00 
0060   078C 00 00 00 00 
0060   0790 00 00 00 00 
0060   0794 00 00 00 00 
0060   0798 00 00 00 00 
0060   079C 00 00 00 00 
0060   07A0 00 00 00 00 
0060   07A4 00 00 00 00 
0060   07A8 00 00 00 00 
0060   07AC 00 00 00 00 
0060   07B0 00 00 00 00 
0060   07B4 00 00 00 00 
0060   07B8 00 00 00 00 
0060   07BC 00 00 00 00 
0060   07C0 00 00 00 00 
0060   07C4 00 00 00 00 
0060   07C8 00 00 00 00 
0060   07CC 00 00 00 00 
0060   07D0 00 00 00 00 
0060   07D4 00 00 00 00 
0060   07D8 00 00 00 00 
0060   07DC 00 00 00 00 
0060   07E0 00 00 00 00 
0060   07E4 00 00 00 00 
0060   07E8 00 00 00 00 
0060   07EC 00 00 00 00 
0060   07F0 00 00 00 00 
0060   07F4 00 00 00 00 
0060   07F8 00 00 00 00 
0060   07FC 00 00 00 00 
0061   0000             			.ORG	$0000
0062   0000 C3 F2 03    RESET_00:	JP		SETUP
0063   0003             ;
0064   0008             			.ORG	$0008
0065   0008 C3 F2 03    RESET_08:	JP		SETUP
0066   000B             ;
0067   0010             			.ORG	$0010
0068   0010 C3 F2 03    RESET_10:	JP		SETUP
0069   0013             ;
0070   0018             			.ORG	$0018
0071   0018 C3 F2 03    RESET_18:	JP		SETUP
0072   001B             ;
0073   0020             			.ORG	$0020
0074   0020 C3 F2 03    RESET_20:	JP		SETUP
0075   0023             ;
0076   0028             			.ORG	$0028
0077   0028 C3 F2 03    RESET_28:	JP		SETUP
0078   002B             ;
0079   0030             			.ORG	$0030
0080   0030 C3 F2 03    RESET_30:	JP		SETUP
0081   0033             ;
0082   0038             			.ORG	$0038
0083   0038 C3 F2 03    RESET_38:	JP		SETUP
0084   003B             ;
0085   0040             			.ORG	$0040
0086   0040 75 4D 4F 4E VERSION:	.TEXT	"uMON V1.03 by Scott Gregory"
0086   0044 20 56 31 2E 
0086   0048 30 33 20 62 
0086   004C 79 20 53 63 
0086   0050 6F 74 74 20 
0086   0054 47 72 65 67 
0086   0058 6F 72 79 
0087   005B             ;
0088   0066             			.ORG	$0066
0089   0066 F5          NMISERVICE:	PUSH	af ; Keyboard service routine.
0090   0067 DB 00       			IN		a,(KEYPORT)
0091   0069 32 C6 08    			LD		(KEYDATA),a
0092   006C F1          			POP		af
0093   006D ED 45       			RETN
0094   006F             ;
0095   0080             			.ORG	$0080
0096   0080 AF          DISPLAY:	XOR		a ; Display update routine.
0097   0081 D3 01       			OUT		(CATHPORT),a
0098   0083 D3 02       			OUT		(SEGPORT),a
0099   0085 4F          			LD		c,a
0100   0086 CB E9       			SET		5,c
0101   0088 ED 5B C1 08 			LD		de,(ADDRESS)
0102   008C 7A          			LD		a,d
0103   008D 32 C3 08    			LD		(SCRATCH),a
0104   0090 AF          			XOR		a
0105   0091 21 C3 08    			LD		hl,SCRATCH
0106   0094 ED 6F       			RLD
0107   0096 DD 21 10 04 			LD		ix,HEX2SEG
0108   009A 16 00       			LD		d,$00
0109   009C 5F          			LD		e,a
0110   009D DD 19       			ADD		ix,de
0111   009F DD 7E 00    			LD		a,(ix)
0112   00A2 E5          			PUSH	hl
0113   00A3 21 C5 08    			LD		hl,MODE
0114   00A6 CB 46       			BIT		0,(hl)
0115   00A8 CA AD 00    			JP		z,DISL00
0116   00AB F6 10       			OR		$10
0117   00AD E1          DISL00:		POP		hl
0118   00AE D3 02       			OUT		(SEGPORT),a
0119   00B0 79          			LD		a,c
0120   00B1 D3 01       			OUT		(CATHPORT),a
0121   00B3 06 40       			LD		b,CATHDLY
0122   00B5 10 FE       DISL01:		DJNZ	DISL01
0123   00B7 AF          			XOR		a
0124   00B8 D3 01       			OUT		(CATHPORT),a
0125   00BA CB 19       			RR		c
0126   00BC ED 6F       			RLD
0127   00BE DD 21 10 04 			LD		ix,HEX2SEG
0128   00C2 16 00       			LD		d,$00
0129   00C4 5F          			LD		e,a
0130   00C5 DD 19       			ADD		ix,de
0131   00C7 DD 7E 00    			LD		a,(ix)
0132   00CA E5          			PUSH	hl
0133   00CB 21 C5 08    			LD		hl,MODE
0134   00CE CB 46       			BIT		0,(hl)
0135   00D0 CA D5 00    			JP		z,DISL02
0136   00D3 F6 10       			OR		$10
0137   00D5 E1          DISL02:		POP		hl
0138   00D6 D3 02       			OUT		(SEGPORT),a
0139   00D8 79          			LD		a,c
0140   00D9 D3 01       			OUT		(CATHPORT),a
0141   00DB 06 40       			LD		b,CATHDLY
0142   00DD 10 FE       DISL03:		DJNZ	DISL03
0143   00DF AF          			XOR		a
0144   00E0 D3 01       			OUT		(CATHPORT),a
0145   00E2 CB 19       			RR		c
0146   00E4 ED 5B C1 08 			LD		de,(ADDRESS)
0147   00E8 7B          			LD		a,e
0148   00E9 32 C3 08    			LD		(SCRATCH),a
0149   00EC AF          			XOR		a
0150   00ED 21 C3 08    			LD		hl,SCRATCH
0151   00F0 ED 6F       			RLD
0152   00F2 DD 21 10 04 			LD		ix,HEX2SEG
0153   00F6 16 00       			LD		d,$00
0154   00F8 5F          			LD		e,a
0155   00F9 DD 19       			ADD		ix,de
0156   00FB DD 7E 00    			LD		a,(ix)
0157   00FE E5          			PUSH	hl
0158   00FF 21 C5 08    			LD		hl,MODE
0159   0102 CB 46       			BIT		0,(hl)
0160   0104 CA 09 01    			JP		z,DISL04
0161   0107 F6 10       			OR		$10
0162   0109 E1          DISL04:		POP		hl
0163   010A D3 02       			OUT		(SEGPORT),a
0164   010C 79          			LD		a,c
0165   010D D3 01       			OUT		(CATHPORT),a
0166   010F 06 40       			LD			b,CATHDLY
0167   0111 10 FE       DISL05:		DJNZ	DISL05
0168   0113 AF          			XOR		a
0169   0114 D3 01       			OUT		(CATHPORT),a
0170   0116 CB 19       			RR		c
0171   0118 ED 6F       			RLD
0172   011A DD 21 10 04 			LD		ix,HEX2SEG
0173   011E 16 00       			LD		d,$00
0174   0120 5F          			LD		e,a
0175   0121 DD 19       			ADD		ix,de
0176   0123 DD 7E 00    			LD		a,(ix)
0177   0126 E5          			PUSH	hl
0178   0127 21 C5 08    			LD		hl,MODE
0179   012A CB 46       			BIT		0,(hl)
0180   012C CA 31 01    			JP		z,DISL06
0181   012F F6 10       			OR		$10
0182   0131 E1          DISL06:		POP		hl
0183   0132 D3 02       			OUT		(SEGPORT),a
0184   0134 79          			LD		a,c
0185   0135 D3 01       			OUT		(CATHPORT),a
0186   0137 06 40       			LD		b,CATHDLY
0187   0139 10 FE       DISL07:		DJNZ	DISL07
0188   013B AF          			XOR		a
0189   013C D3 01       			OUT		(CATHPORT),a
0190   013E CB 19       			RR		c
0191   0140 2A C1 08    			LD		hl,(ADDRESS)
0192   0143 7E          			LD		a,(hl)
0193   0144 32 C3 08    			LD		(SCRATCH),a
0194   0147 AF          			XOR		a
0195   0148 21 C3 08    			LD		hl,SCRATCH
0196   014B ED 6F       			RLD
0197   014D DD 21 10 04 			LD		ix,HEX2SEG
0198   0151 16 00       			LD		d,$00
0199   0153 5F          			LD		e,a
0200   0154 DD 19       			ADD		ix,de
0201   0156 DD 7E 00    			LD		a,(ix)
0202   0159 E5          			PUSH	hl
0203   015A 21 C5 08    			LD		hl,MODE
0204   015D CB 46       			BIT		0,(hl)
0205   015F C2 64 01    			JP		nz,DISL08
0206   0162 F6 10       			OR		$10
0207   0164 E1          DISL08:		POP		hl
0208   0165 D3 02       			OUT		(SEGPORT),a
0209   0167 79          			LD		a,c
0210   0168 D3 01       			OUT		(CATHPORT),a
0211   016A 06 40       			LD		b,CATHDLY
0212   016C 10 FE       DISL09:		DJNZ	DISL09
0213   016E AF          			XOR		a
0214   016F D3 01       			OUT		(CATHPORT),a
0215   0171 CB 19       			RR		c
0216   0173 ED 6F       			RLD
0217   0175 DD 21 10 04 			LD		ix,HEX2SEG
0218   0179 16 00       			LD		d,$00
0219   017B 5F          			LD		e,a
0220   017C DD 19       			ADD		ix,de
0221   017E DD 7E 00    			LD		a,(ix)
0222   0181 E5          			PUSH	hl
0223   0182 21 C5 08    			LD		hl,MODE
0224   0185 CB 46       			BIT		0,(hl)
0225   0187 C2 8C 01    			JP		nz,DISL0A
0226   018A F6 10       			OR		$10
0227   018C E1          DISL0A:		POP		hl
0228   018D D3 02       			OUT		(SEGPORT),a
0229   018F 79          			LD		a,c
0230   0190 D3 01       			OUT		(CATHPORT),a
0231   0192 06 40       			LD		b,CATHDLY
0232   0194 10 FE       DISL0B:		DJNZ	DISL0B
0233   0196 C9          			RET
0234   0197             ;
0235   0197 E5          KEYBOARD:	PUSH	hl ; Key decoder routine.
0236   0198 F5          			PUSH	af
0237   0199 21 30 00    			LD		hl,$0030
0238   019C 22 C7 08    			LD		(BEEPLENGTH),hl
0239   019F 21 C9 08    			LD		hl,BEEPFREQ
0240   01A2 36 30       			LD		(hl),$30
0241   01A4 21 C6 08    			LD		hl,KEYDATA
0242   01A7 3E FF       			LD		a,$FF
0243   01A9 BE          			CP		(hl)
0244   01AA CA AB 03    			JP		z,KEYLXX
0245   01AD CD B3 03    			CALL	BEEP
0246   01B0 7E          			LD		a,(hl)
0247   01B1 E6 3F       			AND		$3f ; We only want the first 6 bits.
0248   01B3 EE 20       			XOR		$20 ; Flip bit 6 (Shift key) because it gives a 1 when not being pressed.
0249   01B5             ;
0250   01B5 FE 10       			CP		$10 ; + key.
0251   01B7 C2 CD 01    			JP		nz,KEYL00
0252   01BA 2A C1 08    			LD		hl,(ADDRESS)
0253   01BD 23          			INC		hl
0254   01BE 22 C1 08    			LD		(ADDRESS),hl
0255   01C1 21 C5 08    			LD		hl,MODE
0256   01C4 CB 86       			RES		0,(hl)
0257   01C6 CB 8E       			RES		1,(hl)
0258   01C8 CB 96       			RES		2,(hl)
0259   01CA C3 AB 03    			JP		KEYLXX
0260   01CD             ;
0261   01CD FE 11       KEYL00:		CP		$11 ; - key.
0262   01CF C2 E5 01    			JP		nz,KEYL01
0263   01D2 2A C1 08    			LD		hl,(ADDRESS)
0264   01D5 2B          			DEC		hl
0265   01D6 22 C1 08    			LD		(ADDRESS),hl
0266   01D9 21 C5 08    			LD		hl,MODE
0267   01DC CB 86       			RES		0,(hl)
0268   01DE CB 8E       			RES		1,(hl)
0269   01E0 CB 96       			RES		2,(hl)
0270   01E2 C3 AB 03    			JP		KEYLXX
0271   01E5             ;
0272   01E5 FE 12       KEYL01:		CP		$12 ; GO key.
0273   01E7 C2 F1 01    			JP		nz,KEYL02
0274   01EA 31 C0 08    			LD		sp,STACKTOP
0275   01ED 2A C1 08    			LD		hl,(ADDRESS)
0276   01F0 E9          			JP		(hl)
0277   01F1             ;
0278   01F1 FE 13       KEYL02:		CP		$13 ; AD key.
0279   01F3 C2 07 02    			JP		nz,KEYL03
0280   01F6 47          			LD		b,a
0281   01F7 3A C5 08    			LD		a,(MODE)
0282   01FA EE 01       			XOR		$01
0283   01FC CB 8F       			RES		1,a
0284   01FE CB 97       			RES		2,a
0285   0200 32 C5 08    			LD		(MODE),a
0286   0203 78          			LD		a,b
0287   0204 C3 AB 03    			JP		KEYLXX
0288   0207             ;
0289   0207 FE 20       KEYL03:		CP		$20 ; Shift-0 key - MOD-01: RAMTest
0290   0209 C2 16 02    			JP		nz,KEYL04
0291   020C F5          			PUSH	af
0292   020D E5          			PUSH	hl
0293   020E CD 20 04    			CALL	MOD01
0294   0211 E1          			POP		hl
0295   0212 F1          			POP		af
0296   0213 C3 AB 03    			JP		KEYLXX
0297   0216             ;
0298   0216 FE 21       KEYL04:		CP		$21 ; Shift-1 key - MOD-02: Serial Send
0299   0218 C2 25 02    			JP		nz,KEYL05
0300   021B F5          			PUSH	af
0301   021C E5          			PUSH	hl
0302   021D CD 74 04    			CALL	MOD02
0303   0220 E1          			POP		hl
0304   0221 F1          			POP		af
0305   0222 C3 AB 03    			JP		KEYLXX
0306   0225             ;
0307   0225 FE 22       KEYL05:		CP		$22 ; Shift-2 key - MOD-03: Serial Receive
0308   0227 C2 34 02    			JP		nz,KEYL06
0309   022A F5          			PUSH	af
0310   022B E5          			PUSH	hl
0311   022C CD 95 04    			CALL	MOD03
0312   022F E1          			POP		hl
0313   0230 F1          			POP		af
0314   0231 CA AB 03    			JP		z,KEYLXX
0315   0234             ;
0316   0234 FE 23       KEYL06:		CP		$23 ; Shift-3 key.
0317   0236 CA AB 03    			JP		z,KEYLXX
0318   0239 00 00 00 00 			.DB		$00, $00, $00, $00, $00, $00, $00, $00, $00, $00
0318   023D 00 00 00 00 
0318   0241 00 00 
0319   0243 FE 24       KEYL07:		CP		$24 ; Shift-4 key.
0320   0245 CA AB 03    			JP		z,KEYLXX
0321   0248 00 00 00 00 			.DB		$00, $00, $00, $00, $00, $00, $00, $00, $00, $00
0321   024C 00 00 00 00 
0321   0250 00 00 
0322   0252 FE 25       KEYL08:		CP		$25 ; Shift-5 key.
0323   0254 CA AB 03    			JP		z,KEYLXX
0324   0257 00 00 00 00 			.DB		$00, $00, $00, $00, $00, $00, $00, $00, $00, $00
0324   025B 00 00 00 00 
0324   025F 00 00 
0325   0261 FE 26       KEYL09:		CP		$26 ; Shift-6 key.
0326   0263 CA AB 03    			JP		z,KEYLXX
0327   0266 00 00 00 00 			.DB		$00, $00, $00, $00, $00, $00, $00, $00, $00, $00
0327   026A 00 00 00 00 
0327   026E 00 00 
0328   0270 FE 27       KEYL0A:		CP		$27 ; Shift-7 key.
0329   0272 CA AB 03    			JP		z,KEYLXX
0330   0275 00 00 00 00 			.DB		$00, $00, $00, $00, $00, $00, $00, $00, $00, $00
0330   0279 00 00 00 00 
0330   027D 00 00 
0331   027F FE 28       KEYL0B:		CP		$28 ; Shift-8 key.
0332   0281 CA AB 03    			JP		z,KEYLXX
0333   0284 00 00 00 00 			.DB		$00, $00, $00, $00, $00, $00, $00, $00, $00, $00
0333   0288 00 00 00 00 
0333   028C 00 00 
0334   028E FE 29       KEYL0C:		CP		$29 ; Shift-9 key.
0335   0290 CA AB 03    			JP		z,KEYLXX
0336   0293 00 00 00 00 			.DB		$00, $00, $00, $00, $00, $00, $00, $00, $00, $00
0336   0297 00 00 00 00 
0336   029B 00 00 
0337   029D FE 2A       KEYL0D:		CP		$2A ; Shift-A key.
0338   029F CA AB 03    			JP		z,KEYLXX
0339   02A2 00 00 00 00 			.DB		$00, $00, $00, $00, $00, $00, $00, $00, $00, $00
0339   02A6 00 00 00 00 
0339   02AA 00 00 
0340   02AC FE 2B       KEYL0E:		CP		$2B ; Shift-B key.
0341   02AE CA AB 03    			JP		z,KEYLXX
0342   02B1 00 00 00 00 			.DB		$00, $00, $00, $00, $00, $00, $00, $00, $00, $00
0342   02B5 00 00 00 00 
0342   02B9 00 00 
0343   02BB FE 2C       KEYL0F:		CP		$2C ; Shift-C key.
0344   02BD CA AB 03    			JP		z,KEYLXX
0345   02C0 00 00 00 00 			.DB		$00, $00, $00, $00, $00, $00, $00, $00, $00, $00
0345   02C4 00 00 00 00 
0345   02C8 00 00 
0346   02CA FE 2D       KEYL10:		CP		$2D ; Shift-D key.
0347   02CC CA AB 03    			JP		z,KEYLXX
0348   02CF 00 00 00 00 			.DB		$00, $00, $00, $00, $00, $00, $00, $00, $00, $00
0348   02D3 00 00 00 00 
0348   02D7 00 00 
0349   02D9 FE 2E       KEYL11:		CP		$2E ; Shift-E key.
0350   02DB CA AB 03    			JP		z,KEYLXX
0351   02DE 00 00 00 00 			.DB		$00, $00, $00, $00, $00, $00, $00, $00, $00, $00
0351   02E2 00 00 00 00 
0351   02E6 00 00 
0352   02E8 FE 2F       KEYL12:		CP		$2F ; Shift-F key - MOD-10: Serial Echo
0353   02EA C2 F7 02    			JP		nz,KEYL13
0354   02ED C3 B6 04    			JP		MOD10
0355   02F0 00 00 00 00 			.DB		$00, $00, $00, $00, $00, $00, $00
0355   02F4 00 00 00 
0356   02F7             ;
0357   02F7 FE 30       KEYL13:		CP		$30 ; Shift-+ key.
0358   02F9 C2 1D 03    			JP		nz,KEYL14
0359   02FC 21 FF FF    			LD		hl,RAMTOP
0360   02FF ED 5B C1 08 			LD		de,(ADDRESS)
0361   0303 ED 52       			SBC		hl,de
0362   0305 44          			LD		b,h
0363   0306 4D          			LD		c,l
0364   0307 21 FF FF    			LD		hl,RAMTOP
0365   030A 54          			LD		d,h
0366   030B 5D          			LD		e,l
0367   030C 2B          			DEC		hl
0368   030D ED B8       			LDDR
0369   030F 62          			LD		h,d
0370   0310 6B          			LD		l,e
0371   0311 36 00       			LD		(hl),$00
0372   0313 21 C5 08    			LD		hl,MODE
0373   0316 CB 8E       			RES		1,(hl)
0374   0318 CB 96       			RES		2,(hl)
0375   031A C3 AB 03    			JP		KEYLXX
0376   031D             ;
0377   031D FE 31       KEYL14:		CP		$31 ; Shift-- key.
0378   031F C2 43 03    			JP		nz,KEYL15
0379   0322 21 FF FF    			LD		hl,RAMTOP
0380   0325 ED 5B C1 08 			LD		de,(ADDRESS)
0381   0329 ED 52       			SBC		hl,de
0382   032B 44          			LD		b,h
0383   032C 4D          			LD		c,l
0384   032D 2A C1 08    			LD		hl,(ADDRESS)
0385   0330 54          			LD		d,h
0386   0331 5D          			LD		e,l
0387   0332 23          			INC		hl
0388   0333 ED B0       			LDIR
0389   0335 62          			LD		h,d
0390   0336 6B          			LD		l,e
0391   0337 36 00       			LD		(hl),$00
0392   0339 21 C5 08    			LD		hl,MODE
0393   033C CB 8E       			RES		1,(hl)
0394   033E CB 96       			RES		2,(hl)
0395   0340 C3 AB 03    			JP		KEYLXX
0396   0343             ;
0397   0343 FE 32       KEYL15:		CP		$32 ; Shift-GO key.
0398   0345 CA AB 03    			JP		z,KEYLXX
0399   0348 FE 33       KEYL16:		CP		$33 ; Shift-AD key.
0400   034A CA AB 03    			JP		z,KEYLXX
0401   034D             ;
0402   034D 21 C5 08    KEYL17:		LD		hl,MODE ; Non-shifted digit keys entry.
0403   0350 CB 46       			BIT		0,(hl) ; 0 = Data Mode, 1 = Address Mode.
0404   0352 C2 86 03    			JP		nz,KEYL19
0405   0355 CB 4E       			BIT		1,(hl)
0406   0357 CA 72 03    			JP		z,KEYL17B ; Jump on 1st time through a data edit.
0407   035A CB 56       			BIT		2,(hl)
0408   035C CA 70 03    			JP		z,KEYL17A ; Jump on 2nd time through a data edit.
0409   035F CB 8E       			RES		1,(hl) ; Do this the 3rd time round a data edit.
0410   0361 CB 96       			RES		2,(hl)
0411   0363 2A C1 08    			LD		hl,(ADDRESS)
0412   0366 23          			INC		hl
0413   0367 22 C1 08    			LD		(ADDRESS),hl
0414   036A 21 C5 08    			LD		hl,MODE
0415   036D C3 72 03    			JP		KEYL17B
0416   0370 CB D6       KEYL17A:	SET		2,(hl)
0417   0372 CB 4E       KEYL17B:	BIT		1,(hl) ; 0 = first nibble, 1 = second nibble.
0418   0374 C2 7E 03    			JP		nz,KEYL18
0419   0377 CB CE       			SET		1,(hl)
0420   0379 2A C1 08    			LD		hl,(ADDRESS)
0421   037C 36 00       			LD		(hl),$00
0422   037E             ;
0423   037E 2A C1 08    KEYL18:		LD		hl,(ADDRESS)
0424   0381 ED 6F       			RLD
0425   0383 C3 AB 03    KEYL18A:	JP		KEYLXX
0426   0386             ;
0427   0386 CB 4E       KEYL19:		BIT		1,(hl) ; 0 = first nibble, 1 = subsequent nibbles.
0428   0388 C2 93 03    			JP		nz,KEYL1A
0429   038B CB CE       			SET		1,(hl)
0430   038D 21 00 00    			LD		hl,$0000
0431   0390 22 C1 08    			LD		(ADDRESS),hl
0432   0393             ;
0433   0393 21 C1 08    KEYL1A:		LD		hl,ADDRESS
0434   0396 ED 6F       			RLD
0435   0398 2A C1 08    			LD		hl,(ADDRESS)
0436   039B CB 24       			SLA		h
0437   039D CB 24       			SLA		h
0438   039F CB 24       			SLA		h
0439   03A1 CB 24       			SLA		h
0440   03A3 47          			LD		b,a
0441   03A4 AF          			XOR		a
0442   03A5 B4          			OR		h
0443   03A6 B0          			OR		b
0444   03A7 67          			LD		h,a
0445   03A8 22 C1 08    			LD		(ADDRESS),hl
0446   03AB             ;
0447   03AB 21 C6 08    KEYLXX:		LD		hl,KEYDATA ; Done with the key decoder.
0448   03AE 36 FF       			LD		(hl),$FF
0449   03B0 F1          			POP		af
0450   03B1 E1          			POP		hl
0451   03B2 C9          			RET
0452   03B3             ;
0453   03B3 E5          BEEP:		PUSH	hl
0454   03B4 F5          			PUSH	af
0455   03B5 21 C9 08    			LD		hl,BEEPFREQ
0456   03B8 4E          			LD		c,(hl)
0457   03B9 2A C7 08    			LD		hl,(BEEPLENGTH)
0458   03BC AF          			XOR		a
0459   03BD 57          			LD		d,a
0460   03BE 41          BEEPL01:	LD		b,c
0461   03BF 7A          			LD		a,d
0462   03C0 D3 01       			OUT		(CATHPORT),a
0463   03C2 10 FE       BEEPL02:	DJNZ	BEEPL02
0464   03C4 EE 80       			XOR		$80
0465   03C6 2B          			DEC		hl
0466   03C7 57          			LD		d,a
0467   03C8 7C          			LD		a,h
0468   03C9 B5          			OR		l
0469   03CA C2 BE 03    			JP		nz,BEEPL01
0470   03CD F1          			POP		af
0471   03CE E1          			POP		hl
0472   03CF C9          			RET
0473   03D0             ;
0474   03D0 E5          STARTBEEP:	PUSH	hl
0475   03D1 F5          			PUSH	af
0476   03D2 21 7F 00    			LD		hl,$007F
0477   03D5 22 C7 08    			LD		(BEEPLENGTH),hl
0478   03D8 21 C9 08    			LD		hl,BEEPFREQ
0479   03DB 36 35       			LD		(hl),$35
0480   03DD CD B3 03    			CALL	BEEP
0481   03E0 36 30       			LD		(hl),$30
0482   03E2 CD B3 03    			CALL	BEEP
0483   03E5 36 25       			LD		(hl),$25
0484   03E7 CD B3 03    			CALL	BEEP
0485   03EA 36 20       			LD		(hl),$20
0486   03EC CD B3 03    			CALL	BEEP
0487   03EF F1          			POP		af
0488   03F0 E1          			POP		hl
0489   03F1 C9          			RET
0490   03F2             ;			
0491   03F2 31 C0 08    SETUP:		LD		sp,STACKTOP ; Post reset/power up setup.
0492   03F5 21 00 09    			LD		hl,RAMBASE
0493   03F8 22 C1 08    			LD		(ADDRESS),hl
0494   03FB AF          			XOR		a
0495   03FC 32 C5 08    			LD		(MODE),a
0496   03FF 3E FF       			LD		a,$FF
0497   0401 32 C6 08    			LD		(KEYDATA),a
0498   0404 CD D0 03    			CALL	STARTBEEP
0499   0407             ;
0500   0407 CD 80 00    MAIN:		CALL	DISPLAY
0501   040A CD 97 01    			CALL	KEYBOARD
0502   040D C3 07 04    			JP		MAIN
0503   0410             ;
0504   0410 EB 28 CD AD HEX2SEG:	.DB		$EB,$28,$CD,$AD,$2E,$A7,$E7,$29 ; HEX Byte to LED Segment conversion.
0504   0414 2E A7 E7 29 
0505   0418 EF 2F 6F E6 			.DB		$EF,$2F,$6F,$E6,$C3,$EC,$C7,$47
0505   041C C3 EC C7 47 
0506   0420             ;
0507   0420             ; BEGIN MODULES.
0508   0420             ; START MOD-01 - Memory Test
0509   0420 2A F2 08    MOD01:		LD		hl,(M01FINISH)
0510   0423 23          			INC		hl
0511   0424 ED 5B F0 08 			LD		de,(M01START)
0512   0428 AF          			XOR		a
0513   0429 ED 52       			SBC		hl,de
0514   042B 44          			LD		b,h
0515   042C 4D          			LD		c,l
0516   042D ED 43 F2 08 			LD		(M01FINISH),bc
0517   0431 2A F0 08    			LD		hl,(M01START)
0518   0434 ED 5B F4 08 			LD		de,(M01PATTERN)
0519   0438 D9          			EXX
0520   0439 2A F0 08    			LD		hl,(M01START)
0521   043C ED 4B F2 08 			LD		bc,(M01FINISH)
0522   0440 ED 5B F4 08 			LD		de,(M01PATTERN)
0523   0444             ;
0524   0444 72          M01LDBLK:	LD		(hl),d
0525   0445 23          			INC		hl
0526   0446 0B          			DEC		bc
0527   0447 78          			LD		a,b
0528   0448 B1          			OR		c
0529   0449 C2 44 04    			JP		nz,M01LDBLK
0530   044C 11 00 00    			LD		de,$0000
0531   044F             ;
0532   044F 1B          M01DELAY:	DEC		de
0533   0450 7A          			LD		a,d
0534   0451 B3          			OR		e
0535   0452 C2 4F 04    			JP		nz,M01DELAY
0536   0455 11 00 00    			LD		de,$0000
0537   0458 D9          			EXX
0538   0459             ;
0539   0459 C3 62 04    M01TSTBLK:	JP		M01TEST01
0540   045C D9          M01TEST00:	EXX
0541   045D 13          			INC		de
0542   045E D9          			EXX
0543   045F C3 67 04    			JP		M01TEST02
0544   0462 7E          M01TEST01:	LD		a,(hl)
0545   0463 BA          			CP		d
0546   0464 C2 5C 04    			JP		nz,M01TEST00
0547   0467 23          M01TEST02:	INC		hl
0548   0468 0B          			DEC		bc
0549   0469 78          			LD		a,b
0550   046A B1          			OR		c
0551   046B C2 62 04    			JP		nz,M01TEST01
0552   046E             ;
0553   046E D9          M01STORE:	EXX
0554   046F ED 53 F0 08 			LD		(M01START),de
0555   0473 C9          			RET
0556   0474             ; END MOD-01
0557   0474             ;
0558   0474             ; START MOD-02 - Serial Send
0559   0474 DB 06       MOD02:		IN		a,(SERBUFFER)
0560   0476 2A F8 08    			LD		hl,(SEREND)
0561   0479 ED 5B F6 08 			LD		de,(SERSTART)
0562   047D ED 52       			SBC		hl,de
0563   047F EB          			EX		de,hl
0564   0480 3E 06       			LD		a,SERBUFFER
0565   0482 4F          			LD		c,a
0566   0483 43          			LD		b,e
0567   0484             ;
0568   0484 DB 07       M02MAIN:	IN		a,(SERSTATUS)
0569   0486 CB 47       			BIT		0,a
0570   0488 C2 84 04    			JP		nz,M02MAIN
0571   048B ED A3       			OUTI
0572   048D 7A          			LD		a,d
0573   048E B3          			OR		e
0574   048F C8          			RET		z
0575   0490 1B          			DEC		de
0576   0491 43          			LD		b,e
0577   0492 C3 84 04    			JP		M02MAIN
0578   0495             
0579   0495             ; END MOD-02
0580   0495             ;
0581   0495             ; START MOD-03 - Serial Receive
0582   0495 DB 06       MOD03:		IN		a,(SERBUFFER)
0583   0497 2A F8 08    			LD		hl,(SEREND)
0584   049A ED 5B F6 08 			LD		de,(SERSTART)
0585   049E ED 52       			SBC		hl,de
0586   04A0 EB          			EX		de,hl
0587   04A1 3E 06       			LD		a,SERBUFFER
0588   04A3 4F          			LD		c,a
0589   04A4 43          			LD		b,e
0590   04A5             ;
0591   04A5 DB 07       M03MAIN:	IN		a,(SERSTATUS)
0592   04A7 CB 4F       			BIT		1,a
0593   04A9 CA A5 04    			JP		z,M03MAIN
0594   04AC ED A2       			INI
0595   04AE 7A          			LD		a,d
0596   04AF B3          			OR		e
0597   04B0 C8          			RET		z
0598   04B1 1B          			DEC		de
0599   04B2 43          			LD		b,e
0600   04B3 C3 A5 04    			JP		M03MAIN
0601   04B6             ; END MOD-03
0602   04B6             ;
0603   04B6             ; START MOD-10 - Serial Echo
0604   04B6 DB 07       MOD10:		IN		a,(SERSTATUS)
0605   04B8 CB 4F       			BIT		1,a
0606   04BA C4 C0 04    			CALL	nz,M10RCV ; Have we received data?
0607   04BD C3 B6 04    			JP		MOD10
0608   04C0             
0609   04C0 DB 06       M10RCV:		IN		a,(SERBUFFER)
0610   04C2 47          			LD		b,a
0611   04C3 CD C7 04    			CALL	M10XMIT
0612   04C6 C9          			RET
0613   04C7             
0614   04C7 DB 07       M10XMIT:	IN		a,(SERSTATUS)
0615   04C9 CB 47       			BIT		0,a
0616   04CB C2 C7 04    			JP		nz,M10XMIT
0617   04CE 78          			LD		a,b
0618   04CF D3 06       			OUT		(SERBUFFER),a
0619   04D1 AF          			XOR		a
0620   04D2 C9          			RET
0621   04D3             ; END MOD-10
0622   04D3             ; END MODULES.
0623   04D3             ;
0624   04D3             			.END
tasm: Number of errors = 0
